!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.urlComposer=r()}(this,function(){"use strict";function n(n){return"[object Array]"===Object.prototype.toString.call(n)}function r(n){if(null==n)return!0;if(n.length>0)return!1;if(0===n.length)return!0;if("object"!=typeof n)return!0;for(var r in n)if(hasOwnProperty.call(n,r))return!1;return!0}function t(n,t){return n=n||"",t=t||[],r(t)?o(n):(n=e(n,t),c(i(n)))}function e(r,t){if(t=t||[],!n(t)){var e=r.match($);t=e.map(function(n){return t[n.substr(1)]})}t.forEach(function(n){r=u(r,n)});var o=r.match(j);return o&&o.forEach(function(n){a(n)&&(r=r.replace(n,""))}),r}function u(n,r){var t=n.indexOf(":")!==-1;return r=encodeURIComponent(r),t?n.replace(E,r):n.replace(w,r)}function a(n){return E.test(n)||w.test(n)}function o(n){return n.replace(j,"")}function c(n){return n.replace(b,"")}function f(n){return n.replace(q,"")}function i(n){return n.replace(x,"")}function p(n){var r=n.host,t=n.path,e=n.query,u=n.hash;return r=c(r),t=c(f(t)),t=t?"/"+t:"",e=e?"?"+e:"",u=u?"#"+u:"",""+r+t+e+u}function s(n){return{named:n.match($)||[],splat:n.match(w)||[]}}function h(n){return n=n.replace(O,"\\$&").replace(j,"(?:$1)?").replace($,function(n,r){return r?n:"([^/?]+)"}).replace(w,"([^?]*?)"),new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")}function l(n){return n=n||{},t(n.path,n.params)}function m(n){var r=[];n=n||{};for(var t in n.query){var e=n.query[t];r.push(t+"="+encodeURIComponent(e))}return r.length?r.join("&"):""}function d(n){n=n||{};var r=h(n.path);return r.test(n.url)}function v(n){n=n||{},n.host=n.host||"";var r=l(n),t=m(n);return p({host:n.host,path:r,query:t,hash:n.hash})}function g(n,r){function t(n){e[n.slice(1)]=r[a++]}var e={},u=s(n),a=0;return u.named.forEach(t),u.splat.forEach(t),e}function y(n,r){var t=n.match(j),e=s(n),u=e.named,a=e.splat,o=u.concat(a);return r=r||{},o=o.map(function(n){for(var e=!1,u=0;u<t.length;u++){var a=t[u];if(a.indexOf(n)!==-1){e=!0;break}}return{name:n,value:r[n.slice(1)]||"",optional:e,required:!e}}),{params:o}}var b=/\/$/,q=/^\//,x=/[\(\)]/g,j=/\((.*?)\)/g,w=/\*\w+/g,E=/(\(\?)?:\w+/,$=/(\(\?)?:\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g,C={build:v,test:d,params:g,stats:y,path:l,query:m,regex:h,match:s};return C});