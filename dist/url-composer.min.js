!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.urlComposer=n()}(this,function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!=typeof e)return!0;for(var n in e)if(hasOwnProperty.call(e,n))return!1;return!0}function r(e,r){return e=e||"",r=r||[],n(r)?c(e):(e=t(e,r),f(a(e)))}function t(n,r){if(r=r||[],!e(r)){var t=n.match(b);r=t.map(function(e){return r[e.substr(1)]})}r.forEach(function(e){n=u(n,e)});var c=n.match(m);return c&&c.forEach(function(e){o(e)&&(n=n.replace(e,""))}),n}function u(e,n){var r=e.indexOf(":")!==-1;return n=encodeURIComponent(n),r?e.replace(y,n):e.replace(v,n)}function o(e){return y.test(e)||v.test(e)}function c(e){return e.replace(m,"")}function f(e){return e.replace(d,"")}function a(e){return e.replace(g,"")}function i(e){return e=e.replace(j,"\\$&").replace(m,"(?:$1)?").replace(b,function(e,n){return n?e:"([^/?]+)"}).replace(v,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")}function p(e){return e=e||{},r(e.path,e.params)}function h(e){var n=[];e=e||{};for(var r in e.query){var t=e.query[r];n.push(r+"="+encodeURIComponent(t))}return n.length?n.join("&"):""}function l(e){e=e||{};var n=i(e.path);return n.test(e.url)}function s(e){e=e||{},e.host=e.host||"",e.hash=e.hash?"#"+e.hash:"";var n=h(e);return n=n?"?"+n:"",""+e.host+p(e)+n+e.hash}var d=/\/$/,g=/[\(\)]/g,m=/\((.*?)\)/g,v=/\*\w+/g,y=/(\(\?)?:\w+/,b=/(\(\?)?:\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g,w={build:s,test:l,path:p,query:h,regex:i};return w});