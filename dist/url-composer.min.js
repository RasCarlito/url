!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.urlComposer=e()}(this,function(){"use strict";function r(r){return"[object Array]"===Object.prototype.toString.call(r)}function e(r){if(null==r)return!0;if(r.length>0)return!1;if(0===r.length)return!0;if("object"!=typeof r)return!0;for(var e in r)if(hasOwnProperty.call(r,e))return!1;return!0}function t(r,t){return r=r||"",t=t||[],e(t)?c(r):(r=n(r,t),f(i(r)))}function n(e,t){if(t=t||[],!r(t)){var n=e.match(b);t=n.map(function(r){return t[r.substr(1)]})}t.forEach(function(r){e=u(e,r)});var c=e.match(y);return c&&c.forEach(function(r){o(r)&&(e=e.replace(r,""))}),e}function u(r,e){return r.indexOf(":")!==-1?r.replace(m,e):r.replace(v,e)}function o(r){return m.test(r)||v.test(r)}function c(r){return r.replace(y,"")}function f(r){return r.replace(g,"")}function i(r){return r.replace(d,"")}function a(r){return r=r.replace(j,"\\$&").replace(y,"(?:$1)?").replace(b,function(r,e){return e?r:"([^/?]+)"}).replace(v,"([^?]*?)"),new RegExp("^"+r+"(?:\\?([\\s\\S]*))?$")}function p(r){return r=r||{},t(r.path,r.params)}function h(r){var e=[];r=r||{};for(var t in r.query){var n=r.query[t];e.push(t+"="+n)}return e.length?e.join("&"):""}function l(r){r=r||{};var e=a(r.path);return e.test(r.url)}function s(r){r=r||{},r.host=r.host||"",r.hash=r.hash?"#"+r.hash:"";var e=h(r);return e=e?"?"+e:"",""+r.host+p(r)+e+r.hash}var g=/\/$/,d=/[\(\)]/g,y=/\((.*?)\)/g,v=/\*\w+/g,m=/(\(\?)?:\w+/,b=/(\(\?)?:\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g,w={build:s,test:l,path:p,query:h,regex:a};return w});