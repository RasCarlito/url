!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):r.urlComposer=n()}(this,function(){"use strict";function r(r){return"[object Array]"===Object.prototype.toString.call(r)}function n(r){if(null==r)return!0;if(r.length>0)return!1;if(0===r.length)return!0;if("object"!=typeof r)return!0;for(var n in r)if(hasOwnProperty.call(r,n))return!1;return!0}function t(r,t){return r=r||"",t=t||[],n(t)?f(r):(r=e(r,t),i(c(r)))}function e(n,t){if(t=t||[],!r(t)){var e=n.match(m);t=e.map(function(r){return t[r.substr(1)]})}t.forEach(function(r){n=u(n,r)});var f=n.match(d);return f&&f.forEach(function(r){o(r)&&(n=n.replace(r,""))}),n}function u(r,n){return r.indexOf(":")!==-1?r.replace(g,n):r.replace(y,n)}function o(r){return g.test(r)||y.test(r)}function f(r){return r.replace(d,"")}function i(r){return r.replace(s,"")}function c(r){return r.replace(l,"")}function a(r){return r=r||{},t(r.path,r.params)}function h(r){var n=[];r=r||{};for(var t in r.query){var e=r.query[t];n.push(t+"="+e)}return n.length?n.join("&"):""}function p(r){r=r||{},r.host=r.host||"",r.hash=r.hash?"#"+r.hash:"";var n=h(r);return n=n?"?"+n:"",""+r.host+a(r)+n+r.hash}var s=/\/$/,l=/[\(\)]/g,d=/\((.*?)\)/g,y=/\*\w+/g,g=/(\(\?)?:\w+/,m=/(\(\?)?:\w+/g,v={build:p,path:a,query:h};return v});