!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.urlComposer=r()}(this,function(){"use strict";function n(n){return"[object Array]"===Object.prototype.toString.call(n)}function r(n){if(null==n)return!0;if(n.length>0)return!1;if(0===n.length)return!0;if("object"!=typeof n)return!0;for(var r in n)if(hasOwnProperty.call(n,r))return!1;return!0}function e(n,e){return n=n||"",e=e||[],r(e)?c(n):(n=t(n,e),a(f(n)))}function t(r,e){if(e=e||[],!n(e)){var t=r.match(j);e=t.map(function(n){return e[n.substr(1)]})}e.forEach(function(n){r=u(r,n)});var c=r.match(v);return c&&c.forEach(function(n){o(n)&&(r=r.replace(n,""))}),r}function u(n,r){var e=n.indexOf(":")!==-1;return r=encodeURIComponent(r),e?n.replace(b,r):n.replace(y,r)}function o(n){return b.test(n)||y.test(n)}function c(n){return n.replace(v,"")}function a(n){return n.replace(m,"")}function f(n){return n.replace(g,"")}function i(n){return n=n.replace(w,"\\$&").replace(v,"(?:$1)?").replace(j,function(n,r){return r?n:"([^/?]+)"}).replace(y,"([^?]*?)"),new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")}function p(n){return n=n||{},e(n.path,n.params)}function h(n){var r=[];n=n||{};for(var e in n.query){var t=n.query[e];r.push(e+"="+encodeURIComponent(t))}return r.length?r.join("&"):""}function s(n){n=n||{};var r=i(n.path);return r.test(n.url)}function l(n){n=n||{},n.host=n.host||"",n.hash=n.hash?"#"+n.hash:"";var r=h(n);return r=r?"?"+r:"",""+n.host+p(n)+r+n.hash}function d(n,r){var e={},t=n.match(j);return t.forEach(function(n,t){e[n.slice(1)]=r[t]}),e}var m=/\/$/,g=/[\(\)]/g,v=/\((.*?)\)/g,y=/\*\w+/g,b=/(\(\?)?:\w+/,j=/(\(\?)?:\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g,x={build:l,test:s,params:d,path:p,query:h,regex:i};return x});