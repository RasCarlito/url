!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.urlComposer=r()}(this,function(){"use strict";function n(n){return"[object Array]"===Object.prototype.toString.call(n)}function r(n){if(null==n)return!0;if(n.length>0)return!1;if(0===n.length)return!0;if("object"!=typeof n)return!0;for(var r in n)if(hasOwnProperty.call(n,r))return!1;return!0}function t(n,t){return n=n||"",t=t||[],r(t)?c(n):(n=e(n,t),a(i(n)))}function e(r,t){if(t=t||[],!n(t)){var e=r.match(E);t=e.map(function(n){return t[n.substr(1)]})}t.forEach(function(n){r=u(r,n)});var c=r.match(q);return c&&c.forEach(function(n){o(n)&&(r=r.replace(n,""))}),r}function u(n,r){var t=n.indexOf(":")!==-1;return r=encodeURIComponent(r),t?n.replace(x,r):n.replace(w,r)}function o(n){return x.test(n)||w.test(n)}function c(n){return n.replace(q,"")}function a(n){return n.replace(y,"")}function f(n){return n.replace(b,"")}function i(n){return n.replace(j,"")}function p(n){return n=n.replace($,"\\$&").replace(q,"(?:$1)?").replace(E,function(n,r){return r?n:"([^/?]+)"}).replace(w,"([^?]*?)"),new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")}function h(n){var r=n.host,t=n.path,e=n.query,u=n.hash;return r=a(r),t=a(f(t)),t=t?"/"+t:"",e=e?"?"+e:"",u=u?"#"+u:"",""+r+t+e+u}function s(n){return n=n||{},t(n.path,n.params)}function l(n){var r=[];n=n||{};for(var t in n.query){var e=n.query[t];r.push(t+"="+encodeURIComponent(e))}return r.length?r.join("&"):""}function m(n){n=n||{};var r=p(n.path);return r.test(n.url)}function g(n){n=n||{},n.host=n.host||"";var r=s(n),t=l(n);return h({host:n.host,path:r,query:t,hash:n.hash})}function v(n,r){var t={},e=n.match(E),u=n.match(w),o=0;return e&&e.forEach(function(n){t[n.slice(1)]=r[o++]}),u&&u.forEach(function(n){t[n.slice(1)]=r[o++]}),t}function d(n){var r={},t=n.match(E);return r.params={names:t,length:t&&t.length},r}var y=/\/$/,b=/^\//,j=/[\(\)]/g,q=/\((.*?)\)/g,w=/\*\w+/g,x=/(\(\?)?:\w+/,E=/(\(\?)?:\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g,C={build:g,test:m,params:v,stats:d,path:s,query:l,regex:p};return C});